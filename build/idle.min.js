/*! Idle.Js, copyright 2013-04-25, Shawn Mclean*/
(function(){var i;i={},i=function(){function i(i){var t,e;i&&(this.awayTimeout=parseInt(i.awayTimeout,10),this.onAway=i.onAway,this.onAwayBack=i.onAwayBack,this.onVisible=i.onVisible,this.onHidden=i.onHidden),e=this,t=function(){return e.onActive()},window.onclick=t,window.onmousemove=t,window.onmouseenter=t,window.onkeydown=t,window.onscroll=t,window.onmousewheel=t,this.startAwayTimeout(),document.addEventListener("visibilitychange",function(){return e.handleVisibilityChange()},!1),document.addEventListener("webkitvisibilitychange",function(){return e.handleVisibilityChange()},!1),document.addEventListener("msvisibilitychange",function(){return e.handleVisibilityChange()},!1)}return i.isAway=!1,i.awayTimeout=3e3,i.awayTimestamp=0,i.awayTimer=null,i.onAway=null,i.onAwayBack=null,i.onVisible=null,i.onHidden=null,i.prototype.onActive=function(){return this.awayTimestamp=(new Date).getTime()+this.awayTimeout,this.isAway&&(this.onAwayBack&&this.onAwayBack(),this.startAwayTimeout()),this.isAway=!1,!0},i.prototype.startAwayTimeout=function(){var i;return this.awayTimestamp=(new Date).getTime()+this.awayTimeout,null!==this.awayTimer&&clearTimeout(this.awayTimer),i=this,this.awayTimer=setTimeout(function(){return i.checkAway()},this.awayTimeout+100)},i.prototype.setAwayTimeout=function(i){return this.awayTimeout=parseInt(i,10),this.startAwayTimeout()},i.prototype.checkAway=function(){var i,t;return t=(new Date).getTime(),this.awayTimestamp>t?(this.isAway=!1,i=this,this.awayTimer=setTimeout(function(){return i.checkAway()},this.awayTimestamp-t+100),void 0):(null!==this.awayTimer&&clearTimeout(this.awayTimer),this.isAway=!0,this.onAway?this.onAway():void 0)},i.prototype.handleVisibilityChange=function(){if(document.hidden||document.msHidden||document.webkitHidden){if(this.onHidden)return this.onHidden()}else if(this.onVisible)return this.onVisible()},i}(),window.Idle=i}).call(this);